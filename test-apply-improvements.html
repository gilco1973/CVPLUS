<!DOCTYPE html>
<html>
<head>
    <title>Test Apply Improvements Function</title>
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getFunctions, httpsCallable } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-functions.js';
        
        // Your Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyAJIVXA0L8e0xnSWMFUj4v5vlPHrGD6dJo",
            authDomain: "getmycv-ai.firebaseapp.com",
            projectId: "getmycv-ai",
            storageBucket: "getmycv-ai.firebasestorage.app",
            messagingSenderId: "644488728556",
            appId: "1:644488728556:web:6b2b0a4ad8b8f9e89b10bd",
            measurementId: "G-1XPLH6WDSM"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const functions = getFunctions(app, 'us-central1');
        
        // Test function
        window.testApplyImprovements = async function() {
            try {
                console.log('Testing applyImprovements function...');
                
                const applyImprovementsFunction = httpsCallable(functions, 'applyImprovements');
                const result = await applyImprovementsFunction({
                    jobId: 'test-job-id',
                    selectedRecommendationIds: ['test-rec-1'],
                    optimizationLevel: 'basic'
                });
                
                console.log('Function call successful:', result);
                document.getElementById('result').innerHTML = '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
                
            } catch (error) {
                console.error('Function call failed:', error);
                document.getElementById('result').innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            }
        };
    </script>
</head>
<body>
    <h1>Test Apply Improvements Function</h1>
    <button onclick="testApplyImprovements()">Test Function</button>
    <div id="result"></div>
</body>
</html>