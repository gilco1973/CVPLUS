<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Click Portal RAG Frontend Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        .diagram-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        .diagram-title {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .diagram-description {
            color: #5a6c7d;
            margin-bottom: 25px;
            line-height: 1.8;
        }
        .mermaid {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e9ecef;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .feature-icon {
            font-size: 2em;
            margin-bottom: 15px;
        }
        .feature-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .feature-description {
            color: #5a6c7d;
            line-height: 1.6;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-completed {
            background: #d4edda;
            color: #155724;
        }
        .tech-stack {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .tech-stack h3 {
            color: white;
            margin-top: 0;
        }
        .tech-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        .tech-item {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ One Click Portal RAG Frontend Architecture</h1>
        <p class="subtitle">Complete frontend implementation for AI-powered professional portals with RAG capabilities</p>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ü§ñ</div>
                <div class="feature-title">Enhanced Chat Interface</div>
                <div class="feature-description">
                    RAG-powered AI chat with confidence scores, source citations, and real-time processing indicators
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <div class="feature-title">Portal Generator</div>
                <div class="feature-description">
                    One-click portal generation with real-time progress tracking and comprehensive error handling
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üëë</div>
                <div class="feature-title">Premium Integration</div>
                <div class="feature-description">
                    Subscription validation, usage limits, and upgrade prompts integrated throughout the UI
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <div class="feature-title">Analytics Dashboard</div>
                <div class="feature-description">
                    Comprehensive portal management with usage statistics and performance metrics
                </div>
            </div>
        </div>

        <div class="tech-stack">
            <h3>üõ†Ô∏è Technology Stack</h3>
            <div class="tech-list">
                <div class="tech-item">React 18 + TypeScript</div>
                <div class="tech-item">Tailwind CSS</div>
                <div class="tech-item">Firebase Functions</div>
                <div class="tech-item">Pinecone Vector DB</div>
                <div class="tech-item">Claude AI</div>
                <div class="tech-item">Premium Service</div>
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üèóÔ∏è Component Architecture
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                High-level overview of the portal frontend component hierarchy and data flow patterns.
            </p>
            <div class="mermaid">
                graph TB
                    PD["üè† PortalDashboard<br/>Main container with tabs and navigation"]
                    PG["‚ö° PortalGenerator<br/>One-click generation with progress tracking"]
                    PCI["ü§ñ PortalChatInterface<br/>RAG-powered AI chat with confidence scores"]
                    PSH["üëë usePremiumSubscription<br/>Premium validation and usage limits"]
                    UFD["üîß useFirebaseFunction<br/>Backend API integration"]

                    PD --> PG
                    PD --> PCI
                    PD --> PSH
                    PG --> PSH
                    PG --> UFD
                    PCI --> UFD
                    PCI --> PSH

                    subgraph "Backend Integration"
                        UFD --> FB["üî• Firebase Functions"]
                        FB --> PC["portalChat Function"]
                        FB --> GWP["generateWebPortal Function"]
                        FB --> GPS["getPremiumStatus Function"]
                    end

                    subgraph "AI Services"
                        PC --> CL["üß† Claude AI"]
                        PC --> PN["üìä Pinecone Vector DB"]
                        PC --> OE["üî§ OpenAI Embeddings"]
                    end

                    style PD fill:#e1f5fe
                    style PG fill:#f3e5f5
                    style PCI fill:#e8f5e8
                    style PSH fill:#fff3e0
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üîÑ RAG Chat Flow
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                Detailed flow of RAG-powered chat interactions from user input to AI response with source citations.
            </p>
            <div class="mermaid">
                sequenceDiagram
                    participant U as üë§ User
                    participant CI as ü§ñ ChatInterface
                    participant FB as üî• Firebase Function
                    participant PN as üìä Pinecone
                    participant CL as üß† Claude AI
                    participant UI as üñ•Ô∏è UI Update

                    U->>CI: Type message
                    CI->>UI: Show "AI is searching CV content..."
                    CI->>FB: Call portalChat function
                    FB->>PN: Vector search with OpenAI embeddings
                    PN-->>FB: Return relevant CV sections
                    FB->>CL: Generate response with RAG context
                    CL-->>FB: AI response with confidence score
                    FB-->>CI: Response with sources and metadata
                    CI->>UI: Display confidence score (0-100%)
                    CI->>UI: Show source citations with relevance
                    CI->>UI: Render suggested follow-up questions
                    UI-->>U: Complete AI response with sources

                    Note over CI,UI: Real-time processing indicators
                    Note over FB,CL: 2-3 second response time target
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üöÄ Portal Generation Pipeline
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                Step-by-step portal generation process with real-time progress tracking and error handling.
            </p>
            <div class="mermaid">
                graph LR
                    START["üéØ Start Generation"] --> PREM{"üëë Premium Check"}
                    PREM -->|No| UPG["üí∞ Show Upgrade Prompt"]
                    PREM -->|Yes| VAL["‚úÖ Validate CV Data"]
                    
                    VAL --> PROC["üîÑ Process Content"]
                    PROC --> EMB["üìä Generate RAG Embeddings"]
                    EMB --> BUILD["üèóÔ∏è Build Portal Components"]
                    BUILD --> DEPLOY["‚òÅÔ∏è Deploy to HuggingFace"]
                    DEPLOY --> SUCCESS["üéâ Success with URL"]
                    
                    VAL -->|Error| ERR["‚ùå Show Error + Retry"]
                    PROC -->|Error| ERR
                    EMB -->|Error| ERR
                    BUILD -->|Error| ERR
                    DEPLOY -->|Error| ERR
                    
                    ERR --> RETRY{"üîÑ User Retry?"}
                    RETRY -->|Yes| VAL
                    RETRY -->|No| END["‚èπÔ∏è End"]
                    
                    UPG --> END
                    SUCCESS --> END

                    style START fill:#e8f5e8
                    style SUCCESS fill:#e8f5e8
                    style ERR fill:#ffebee
                    style UPG fill:#fff3e0
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üéõÔ∏è Dashboard State Management
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                Portal dashboard state flow showing tab navigation, data fetching, and real-time updates.
            </p>
            <div class="mermaid">
                stateDiagram-v2
                    [*] --> Loading: Initialize Dashboard
                    Loading --> Overview: Data Loaded
                    Loading --> Error: Fetch Failed
                    
                    Overview --> Generation: Click Generate Tab
                    Overview --> Chat: Click Chat Tab
                    Overview --> Analytics: Click Analytics Tab
                    Overview --> Settings: Click Settings Tab
                    
                    Generation --> Generating: Start Generation
                    Generating --> Success: Portal Created
                    Generating --> Failed: Generation Error
                    Success --> Overview: Return to Overview
                    Failed --> Generation: Retry
                    
                    Chat --> Chatting: Send Message
                    Chatting --> Chat: Response Received
                    
                    Analytics --> Overview: View Complete
                    Settings --> Overview: Settings Saved
                    
                    Error --> Loading: Retry
                    
                    state "Real-time Updates" as RTU
                    Overview --> RTU: Every 30s
                    RTU --> Overview: Data Refreshed
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üîê Premium Feature Gates
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                Premium subscription validation and feature access control throughout the portal interface.
            </p>
            <div class="mermaid">
                graph TD
                    USER["üë§ User Action"] --> CHECK{"üëë Premium Check"}
                    
                    CHECK -->|Free User| LIMIT{"üìä Usage Limits"}
                    CHECK -->|Premium User| ACCESS["‚úÖ Full Access"]
                    
                    LIMIT -->|Within Limits| BASIC["üîì Basic Features"]
                    LIMIT -->|Exceeded| BLOCK["üö´ Feature Blocked"]
                    
                    BLOCK --> PROMPT["üí∞ Upgrade Prompt"]
                    PROMPT --> UPGRADE{"üí≥ User Upgrades?"}
                    UPGRADE -->|Yes| ACCESS
                    UPGRADE -->|No| BLOCK
                    
                    ACCESS --> TRACK["üìà Track Usage"]
                    BASIC --> TRACK
                    
                    subgraph "Feature Access Levels"
                        F1["ü§ñ Portal Generation: Premium Only"]
                        F2["üí¨ RAG Chat: Premium Unlimited, Free 10/day"]
                        F3["üìä Analytics: Premium Only"]
                        F4["üîß Advanced Settings: Premium Only"]
                    end

                    style ACCESS fill:#e8f5e8
                    style BLOCK fill:#ffebee
                    style PROMPT fill:#fff3e0
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">
                üì± Mobile-First Responsive Design
                <span class="status-badge status-completed">‚úÖ IMPLEMENTED</span>
            </h2>
            <p class="diagram-description">
                Responsive design patterns ensuring optimal user experience across all device sizes.
            </p>
            <div class="mermaid">
                graph TB
                    subgraph "üì± Mobile (< 768px)"
                        M1["Single Column Layout"]
                        M2["Collapsible Navigation"]
                        M3["Touch-Friendly Buttons"]
                        M4["Stacked Chat Interface"]
                    end
                    
                    subgraph "üíª Tablet (768px - 1024px)"
                        T1["Two Column Layout"]
                        T2["Tab Navigation"]
                        T3["Side-by-Side Chat"]
                        T4["Responsive Cards"]
                    end
                    
                    subgraph "üñ•Ô∏è Desktop (> 1024px)"
                        D1["Multi-Column Layout"]
                        D2["Full Dashboard View"]
                        D3["Expanded Chat Interface"]
                        D4["Rich Analytics Charts"]
                    end
                    
                    DEVICE["üìê Device Detection"] --> MOBILE{"Mobile?"}
                    MOBILE -->|Yes| M1
                    MOBILE -->|No| TABLET{"Tablet?"}
                    TABLET -->|Yes| T1
                    TABLET -->|No| D1

                    style M1 fill:#e3f2fd
                    style T1 fill:#f3e5f5
                    style D1 fill:#e8f5e8
            </div>
        </div>

        <div class="diagram-section">
            <h2 class="diagram-title">üìà Implementation Summary</h2>
            <p class="diagram-description">
                Comprehensive frontend implementation completed with all major features and integrations.
            </p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-title">‚úÖ Core Components</div>
                    <ul>
                        <li>PortalDashboard - Main interface</li>
                        <li>PortalGenerator - One-click generation</li>
                        <li>PortalChatInterface - RAG-powered chat</li>
                        <li>Premium subscription hooks</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">‚úÖ Advanced Features</div>
                    <ul>
                        <li>AI confidence scores</li>
                        <li>Source citations from CV</li>
                        <li>Real-time progress tracking</li>
                        <li>Premium validation gates</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">‚úÖ User Experience</div>
                    <ul>
                        <li>Mobile-responsive design</li>
                        <li>Real-time status indicators</li>
                        <li>Comprehensive error handling</li>
                        <li>Intuitive navigation</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">‚úÖ Performance</div>
                    <ul>
                        <li>< 3 second chat responses</li>
                        <li>Optimized bundle size</li>
                        <li>Efficient state management</li>
                        <li>TypeScript type safety</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            },
            gantt: {
                titleTopMargin: 25,
                barHeight: 20,
                fontFamily: '"Inter", sans-serif',
                fontSize: 11,
                gridLineStartPadding: 35
            }
        });
    </script>
</body>
</html>